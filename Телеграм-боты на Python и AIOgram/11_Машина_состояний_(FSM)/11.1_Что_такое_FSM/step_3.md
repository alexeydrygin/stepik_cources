## –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞
-----------

–ê —Ç–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ —Ä–µ–∞–ª–∏–∑—É–µ–º –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ö–µ–º—É –≤ –∫–æ–¥–µ. –°–Ω–∞—á–∞–ª–∞, –∫–∞–∫ –æ–±—ã—á–Ω–æ, –±—É–¥–µ—Ç –∏–¥—Ç–∏ –≤–µ—Å—å –∫–æ–¥, –∞ –Ω–∏–∂–µ —è –æ–ø–∏—à—É —Ä–∞–±–æ—Ç—É –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞.

    from aiogram import Bot, Dispatcher, F
    from aiogram.filters import Command, CommandStart, StateFilter, Text
    from aiogram.filters.state import State, StatesGroup
    from aiogram.fsm.context import FSMContext
    from aiogram.fsm.state import default_state
    from aiogram.fsm.storage.memory import MemoryStorage
    from aiogram.types import (CallbackQuery, InlineKeyboardButton,
                               InlineKeyboardMarkup, Message, PhotoSize)
    
    # –í–º–µ—Å—Ç–æ BOT TOKEN HERE –Ω—É–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞,
    # –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —É @BotFather
    BOT_TOKEN = 'BOT TOKEN HERE'
    
    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (—Å–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ MemoryStorage)
    storage: MemoryStorage = MemoryStorage()
    
    # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
    bot: Bot = Bot(BOT_TOKEN)
    dp: Dispatcher = Dispatcher(storage=storage)
    
    # –°–æ–∑–¥–∞–µ–º "–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    user_dict: dict[int, dict[str, str | int | bool]] = {}
    
    
    # C–æ–∑–¥–∞–µ–º –∫–ª–∞—Å—Å, –Ω–∞—Å–ª–µ–¥—É–µ–º—ã–π –æ—Ç StatesGroup, –¥–ª—è –≥—Ä—É–ø–ø—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –Ω–∞—à–µ–π FSM
    class FSMFillForm(StatesGroup):
        # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–∞ State, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
        # –ø–µ—Ä–µ—á–∏—Å–ª—è—è –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è
        # –±–æ—Ç –≤ —Ä–∞–∑–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Ç—Å–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
        fill_name = State()        # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
        fill_age = State()         # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞
        fill_gender = State()      # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
        upload_photo = State()     # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
        fill_education = State()   # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
        fill_wish_news = State()   # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç—å –ª–∏ –Ω–æ–≤–æ—Å—Ç–∏
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start –≤–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
    # –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã, –æ—Ç–ø—Ä–∞–≤–∏–≤ –∫–æ–º–∞–Ω–¥—É /fillform
    @dp.message(CommandStart(), StateFilter(default_state))
    async def process_start_command(message: Message):
        await message.answer(text='–≠—Ç–æ—Ç –±–æ—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É FSM\n\n'
                                  '–ß—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã - '
                                  '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /fillform')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É "/cancel" –≤ –ª—é–±—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö,
    # –∫—Ä–æ–º–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∏ –æ—Ç–∫–ª—é—á–∞—Ç—å –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π
    @dp.message(Command(commands='cancel'), ~StateFilter(default_state))
    async def process_cancel_command_state(message: Message, state: FSMContext):
        await message.answer(text='–í—ã –≤—ã—à–ª–∏ –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π\n\n'
                                  '–ß—Ç–æ–±—ã —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã - '
                                  '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /fillform')
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        await state.clear()
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É "/cancel" –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
    # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —Å–æ–æ–±—â–∞—Ç—å, —á—Ç–æ —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –º–∞—à–∏–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
    @dp.message(Command(commands='cancel'), StateFilter(default_state))
    async def process_cancel_command(message: Message):
        await message.answer(text='–û—Ç–º–µ–Ω—è—Ç—å –Ω–µ—á–µ–≥–æ. –í—ã –≤–Ω–µ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π\n\n'
                                  '–ß—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã - '
                                  '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /fillform')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É /fillform
    # –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –±–æ—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
    @dp.message(Command(commands='fillform'), StateFilter(default_state))
    async def process_fillform_command(message: Message, state: FSMContext):
        await message.answer(text='–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è')
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
        await state.set_state(FSMFillForm.fill_name)
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–≤–µ–¥–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è
    # –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞
    @dp.message(StateFilter(FSMFillForm.fill_name), F.text.isalpha())
    async def process_name_sent(message: Message, state: FSMContext):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –≤–≤–µ–¥–µ–Ω–Ω–æ–µ –∏–º—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ –∫–ª—é—á—É "name"
        await state.update_data(name=message.text)
        await message.answer(text='–°–ø–∞—Å–∏–±–æ!\n\n–ê —Ç–µ–ø–µ—Ä—å –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–∑—Ä–∞—Å—Ç')
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞
        await state.set_state(FSMFillForm.fill_age)
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
    # –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.fill_name))
    async def warning_not_name(message: Message):
        await message.answer(text='–¢–æ, —á—Ç–æ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –Ω–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∏–º—è\n\n'
                                  '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è\n\n'
                                  '–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - '
                                  '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /cancel')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–≤–µ–¥–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç
    # –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
    @dp.message(StateFilter(FSMFillForm.fill_age),
                lambda x: x.text.isdigit() and 4 <= int(x.text) <= 120)
    async def process_age_sent(message: Message, state: FSMContext):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –≤–æ–∑—Ä–∞—Å—Ç –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ –∫–ª—é—á—É "age"
        await state.update_data(age=message.text)
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–æ–∫
        male_button = InlineKeyboardButton(text='–ú—É–∂—Å–∫–æ–π ‚ôÇ',
                                           callback_data='male')
        female_button = InlineKeyboardButton(text='–ñ–µ–Ω—Å–∫–∏–π ‚ôÄ',
                                             callback_data='female')
        undefined_button = InlineKeyboardButton(text='ü§∑ –ü–æ–∫–∞ –Ω–µ —è—Å–Ω–æ',
                                                callback_data='undefined_gender')
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (–¥–≤–µ –≤ –æ–¥–Ω–æ–º —Ä—è–¥—É –∏ –æ–¥–Ω—É –≤ –¥—Ä—É–≥–æ–º)
        keyboard: list[list[InlineKeyboardButton]] = [[male_button, female_button],
                                                      [undefined_button]]
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        markup = InlineKeyboardMarkup(inline_keyboard=keyboard)
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        await message.answer(text='–°–ø–∞—Å–∏–±–æ!\n\n–£–∫–∞–∂–∏—Ç–µ –≤–∞—à –ø–æ–ª',
                             reply_markup=markup)
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
        await state.set_state(FSMFillForm.fill_gender)
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞
    # –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.fill_age))
    async def warning_not_age(message: Message):
        await message.answer(
            text='–í–æ–∑—Ä–∞—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º –æ—Ç 4 –¥–æ 120\n\n'
                 '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑\n\n–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å '
                 '–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /cancel')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏
    # –≤—ã–±–æ—Ä–µ –ø–æ–ª–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ
    @dp.callback_query(StateFilter(FSMFillForm.fill_gender),
                       Text(text=['male', 'female', 'undefined_gender']))
    async def process_gender_press(callback: CallbackQuery, state: FSMContext):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª (callback.data –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–∏) –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ,
        # –ø–æ –∫–ª—é—á—É "gender"
        await state.update_data(gender=callback.data)
        # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
        # —á—Ç–æ–±—ã —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –±—ã–ª–æ –∂–µ–ª–∞–Ω–∏—è —Ç—ã–∫–∞—Ç—å –∫–Ω–æ–ø–∫–∏
        await callback.message.delete()
        await callback.message.answer(text='–°–ø–∞—Å–∏–±–æ! –ê —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∑–∏—Ç–µ, '
                                           '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–∞—à–µ —Ñ–æ—Ç–æ')
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
        await state.set_state(FSMFillForm.upload_photo)
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
    # –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ/–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.fill_gender))
    async def warning_not_gender(message: Message):
        await message.answer(text='–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–Ω–æ–ø–∫–∞–º–∏ '
                                  '–ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–æ–ª–∞\n\n–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å '
                                  '–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /cancel')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ç–æ
    # –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
    @dp.message(StateFilter(FSMFillForm.upload_photo),
                F.photo[-1].as_('largest_photo'))
    async def process_photo_sent(message: Message,
                                 state: FSMContext,
                                 largest_photo: PhotoSize):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ (file_unique_id –∏ file_id) –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
        # –ø–æ –∫–ª—é—á–∞–º "photo_unique_id" –∏ "photo_id"
        await state.update_data(photo_unique_id=largest_photo.file_unique_id,
                                photo_id=largest_photo.file_id)
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–æ–∫
        secondary_button = InlineKeyboardButton(text='–°—Ä–µ–¥–Ω–µ–µ',
                                                callback_data='secondary')
        higher_button = InlineKeyboardButton(text='–í—ã—Å—à–µ–µ',
                                             callback_data='higher')
        no_edu_button = InlineKeyboardButton(text='ü§∑ –ù–µ—Ç—É',
                                             callback_data='no_edu')
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (–¥–≤–µ –≤ –æ–¥–Ω–æ–º —Ä—è–¥—É –∏ –æ–¥–Ω—É –≤ –¥—Ä—É–≥–æ–º)
        keyboard: list[list[InlineKeyboardButton]] = [
                            [secondary_button, higher_button],
                            [no_edu_button]]
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        markup = InlineKeyboardMarkup(inline_keyboard=keyboard)
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        await message.answer(text='–°–ø–∞—Å–∏–±–æ!\n\n–£–∫–∞–∂–∏—Ç–µ –≤–∞—à–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ',
                             reply_markup=markup)
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
        await state.set_state(FSMFillForm.fill_education)
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ
    # –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ/–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.upload_photo))
    async def warning_not_photo(message: Message):
        await message.answer(text='–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ '
                                  '–≤–∞—à–µ —Ñ–æ—Ç–æ\n\n–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å '
                                  '–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /cancel')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
    # –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–≥–ª–∞—Å–∏—è –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
    @dp.callback_query(StateFilter(FSMFillForm.fill_education),
                       Text(text=['secondary', 'higher', 'no_edu']))
    async def process_education_press(callback: CallbackQuery, state: FSMContext):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ–± –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏ –ø–æ –∫–ª—é—á—É "education"
        await state.update_data(education=callback.data)
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–æ–∫
        yes_news_button = InlineKeyboardButton(text='–î–∞',
                                               callback_data='yes_news')
        no_news_button = InlineKeyboardButton(text='–ù–µ—Ç, —Å–ø–∞—Å–∏–±–æ',
                                              callback_data='no_news')
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ –æ–¥–∏–Ω —Ä—è–¥
        keyboard: list[list[InlineKeyboardButton]] = [
                                        [yes_news_button,
                                         no_news_button]]
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        markup = InlineKeyboardMarkup(inline_keyboard=keyboard)
        # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏, –æ—Ç–ø—Ä–∞–≤–ª—è—è
        # –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç –∏ –Ω–æ–≤—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
        await callback.message.edit_text(text='–°–ø–∞—Å–∏–±–æ!\n\n'
                                              '–û—Å—Ç–∞–ª—Å—è –ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥.\n'
                                              '–•–æ—Ç–µ–ª–∏ –±—ã –≤—ã –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏?',
                                         reply_markup=markup)
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –∏–ª–∏ –Ω–µ—Ç
        await state.set_state(FSMFillForm.fill_wish_news)
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–±–æ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
    # –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ/–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.fill_education))
    async def warning_not_education(message: Message):
        await message.answer(text='–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–Ω–æ–ø–∫–∞–º–∏ '
                                  '–ø—Ä–∏ –≤—ã–±–æ—Ä–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è\n\n–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ '
                                  '–ø—Ä–µ—Ä–≤–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ '
                                  '–∫–æ–º–∞–Ω–¥—É /cancel')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –≤—ã–±–æ—Ä –ø–æ–ª—É—á–∞—Ç—å –∏–ª–∏
    # –Ω–µ –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ –∏ –≤—ã–≤–æ–¥–∏—Ç—å –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
    @dp.callback_query(StateFilter(FSMFillForm.fill_wish_news),
                       Text(text=['yes_news', 'no_news']))
    async def process_wish_news_press(callback: CallbackQuery, state: FSMContext):
        # C –ø–æ–º–æ—â—å—é –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ
        # –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ –∫–ª—é—á—É "wish_news"
        await state.update_data(wish_news=callback.data == 'yes_news')
        # –î–æ–±–∞–≤–ª—è–µ–º –≤ "–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö" –∞–Ω–∫–µ—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        # –ø–æ –∫–ª—é—á—É id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user_dict[callback.from_user.id] = await state.get_data()
        # –ó–∞–≤–µ—Ä—à–∞–µ–º –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π
        await state.clear()
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã—Ö–æ–¥–µ –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
        await callback.message.edit_text(text='–°–ø–∞—Å–∏–±–æ! –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!\n\n'
                                              '–í—ã –≤—ã—à–ª–∏ –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π')
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ—é –∞–Ω–∫–µ—Ç—É
        await callback.message.answer(text='–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π '
                                           '–∞–Ω–∫–µ—Ç—ã - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /showdata')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è —Å–æ–≥–ª–∞—Å–∏—è –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ
    # –Ω–æ–≤–æ—Å—Ç–µ–π –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ/–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.fill_wish_news))
    async def warning_not_wish_news(message: Message):
        await message.answer(text='–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–Ω–æ–ø–∫–∞–º–∏!\n\n'
                                  '–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - '
                                  '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /cancel')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ–º–∞–Ω–¥—ã /showdata
    # –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ —á–∞—Ç –¥–∞–Ω–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã, –ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
    @dp.message(Command(commands='showdata'), StateFilter(default_state))
    async def process_showdata_command(message: Message):
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∞–Ω–∫–µ—Ç—É, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å –≤ "–±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"
        if message.from_user.id in user_dict:
            await message.answer_photo(
                photo=user_dict[message.from_user.id]['photo_id'],
                caption=f'–ò–º—è: {user_dict[message.from_user.id]["name"]}\n'
                        f'–í–æ–∑—Ä–∞—Å—Ç: {user_dict[message.from_user.id]["age"]}\n'
                        f'–ü–æ–ª: {user_dict[message.from_user.id]["gender"]}\n'
                        f'–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: {user_dict[message.from_user.id]["education"]}\n'
                        f'–ü–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏: {user_dict[message.from_user.id]["wish_news"]}')
        else:
            # –ï—Å–ª–∏ –∞–Ω–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –Ω–µ—Ç - –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –∑–∞–ø–æ–ª–Ω–∏—Ç—å
            await message.answer(text='–í—ã –µ—â–µ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–ª–∏ –∞–Ω–∫–µ—Ç—É. '
                                      '–ß—Ç–æ–±—ã –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ '
                                      '–∫–æ–º–∞–Ω–¥—É /fillform')
    
    
    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –ª—é–±—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫—Ä–æ–º–µ —Ç–µ—Ö
    # –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã, –≤–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
    @dp.message(StateFilter(default_state))
    async def send_echo(message: Message):
        await message.reply(text='–ò–∑–≤–∏–Ω–∏—Ç–µ, –º–æ—è —Ç–≤–æ—è –Ω–µ –ø–æ–Ω–∏–º–∞—Ç—å')
    
    
    # –ó–∞–ø—É—Å–∫–∞–µ–º –ø–æ–ª–ª–∏–Ω–≥
    if __name__ == '__main__':
        dp.run_polling(bot)

–í–µ—Å—å –∫–æ–¥ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ –∑–¥–µ—Å—å –ø—Ä–æ—Å—Ç–æ –¥–ª—è –Ω–∞–≥–ª—è–¥–Ω–æ—Å—Ç–∏, –¥—É–º–∞—é, –≤—ã —É–∂–µ –ø—Ä–∏–≤—ã–∫–ª–∏. –î–∞–≤–∞–π—Ç–µ —Ç–µ–ø–µ—Ä—å –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –Ω–µ–≥–æ –¥–µ—Ç–∞–ª—å–Ω–æ. –í–æ-–ø–µ—Ä–≤—ã—Ö, –ø–æ—è–≤–∏–ª–æ—Å—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö –∏–º–ø–æ—Ä—Ç–æ–≤.

    from aiogram.filters import StateFilter

–ò–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å `StateFilter`¬†- —Ñ–∏–ª—å—Ç—Ä, –æ—Ç–≤–µ—á–∞—é—â–∏–π, –∫–∞–∫ –ø–æ–Ω—è—Ç–Ω–æ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è, –∑–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –¢–æ –µ—Å—Ç—å –∞–ø–¥–µ–π—Ç—ã –±—É–¥—É—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä—ã –∫–æ–º–∞–Ω–¥ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã callback.data, –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö, –Ω–æ –µ—â–µ –∏ —á–µ—Ä–µ–∑ —Ñ–∏–ª—å—Ç—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ö–æ–≥–¥–∞ –º—ã –Ω–µ –ø–∏—à–µ–º –Ω–∏–∫–∞–∫–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤, –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è, —á—Ç–æ —Ö—ç–Ω–¥–ª–µ—Ä—ã –±—É–¥—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤ –ª—é–±—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö.

    from aiogram.filters.state import State, StatesGroup

–ó–¥–µ—Å—å –º—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –µ—â–µ –¥–≤–∞ –∫–ª–∞—Å—Å–∞ -¬†`StatesGroup`, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –≥—Ä—É–ø–ø—É —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ `State`, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ —Å–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –í–Ω—É—Ç—Ä–∏ –±–æ—Ç–∞ –º—ã –º–æ–∂–µ–º –∑–∞–ø—É—Å–∫–∞—Ç—å –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å—Ç–æ–ª—å–∫–æ —Ä–∞–∑, —Å–∫–æ–ª—å–∫–æ –Ω–∞–º —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –º–æ–≥—É—Ç –æ—Ç–Ω–æ—Å–∏—Ç—å—Å—è –∫ —Ä–∞–∑–Ω–æ–π –ª–æ–≥–∏–∫–µ. –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ –º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–ø—É—â–µ–Ω–∞, –∫–∞–∫ –≤ –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ, –¥–ª—è —Å–±–æ—Ä–∞ –∞–Ω–∫–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∞ –≥–¥–µ-—Ç–æ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ –±–æ—Ç–∞ –º—ã –∑–∞—Ö–æ—Ç–∏–º —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–æ—Ç–∞. –ò, –≤–æ—Ç, —Ç–∞–∫–∏–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø–æ —Å–º—ã—Å–ª—É —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏–Ω—è—Ç–æ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å - –æ–±—ä–µ–¥–∏–Ω—è—Ç—å –≤ –≥—Ä—É–ø–ø—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π, —á—Ç–æ–±—ã –ª–µ–≥—á–µ –±—ã–ª–æ —Å—Ä–µ–¥–∏ –Ω–∏—Ö –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è. –í –∫–æ–¥–µ –≤—ã—à–µ —É –Ω–∞—Å –≤—Å–µ–≥–æ –æ–¥–Ω–∞ –≥—Ä—É–ø–ø–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –æ—á–µ–Ω—å –ª–æ–≥–∏—á–Ω–æ –±—ã–ª–æ –±—ã —Ä–∞–∑–¥–µ–ª—è—Ç—å –Ω–∞ –≥—Ä—É–ø–ø—ã —Ç–æ, —á—Ç–æ –ø–æ —Å–º—ã—Å–ª—É –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ –æ–¥–Ω–æ–π. –ù–æ, –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ, –Ω–∏—á—Ç–æ, –∫—Ä–æ–º–µ –∑–¥—Ä–∞–≤–æ–≥–æ —Å–º—ã—Å–ª–∞, –Ω–µ –∑–∞–ø—Ä–µ—â–∞–µ—Ç —Å–¥–µ–ª–∞—Ç—å —Ö–æ—Ç—å –Ω–∞ –∫–∞–∂–¥–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥—Ä—É–ø–ø–µ.

    from aiogram.fsm.context import FSMContext

`FSMContext` - —ç—Ç–æ –∫–ª–∞—Å—Å –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –º–∞—à–∏–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ß–µ—Ä–µ–∑ –Ω–µ–≥–æ –º—ã –±—É–¥–µ–º –≤ —Ö—ç–Ω–¥–ª–µ—Ä—ã –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö –∏ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ö—Ä–∞–Ω–∏–ª–∏—â—É¬†`MemoryStorage`¬†–ø—Ä—è–º–æ –≤–Ω—É—Ç—Ä–∏ —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤.

    from aiogram.fsm.state import default_state

`default_state` - —ç—Ç–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ç–æ –µ—Å—Ç—å —Ç–∞–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, –ø–æ–∫–∞ –º—ã —è–≤–Ω–æ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∫–∞–∫–æ–µ-—Ç–æ –¥—Ä—É–≥–æ–µ. –í–æ –≤—Å–µ—Ö –Ω–∞—à–∏—Ö —Å –≤–∞–º–∏ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –±–æ—Ç–∞—Ö –±—ã–ª–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - –∫–∞–∫ —Ä–∞–∑¬†`default_state`. –ú—ã –µ–≥–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–ª–∏ —Ä–∞–Ω—å—à–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞–º –Ω–µ –Ω–∞–¥–æ –±—ã–ª–æ —Ä–∞–∑–ª–∏—á–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è. –°–æ—Å—Ç–æ—è–Ω–∏–µ –±—ã–ª–æ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ. –ê –≤ —ç—Ç–æ–º –±–æ—Ç–µ, –ø–æ–º–∏–º–æ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ, –±—É–¥—É—Ç –∏ –¥—Ä—É–≥–∏–µ, –∏ –Ω–∞–º –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∏—Ö —Ä–∞–∑–ª–∏—á–∞—Ç—å.

    from aiogram.fsm.storage.memory import MemoryStorage

–î–∞–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π –º—ã –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–ª–∞—Å—Å `MemoryStorage`, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã FSM. –ó–¥–µ—Å—å –Ω–∞–¥–æ –ø–æ–Ω–∏–º–∞—Ç—å, —á—Ç–æ –æ–±—ä–µ–∫—Ç –∫–ª–∞—Å—Å–∞¬†`MemoryStorage` —Ö—Ä–∞–Ω–∏—Ç—Å—è –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ –∏ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –Ω–µ–≥–æ —Å—Ç–∏—Ä–∞—é—Ç—Å—è. –ï–≥–æ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö, –≤–æ –≤—Ä–µ–º—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π, –Ω–æ –Ω–µ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω–µ, –≥–¥–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –º–æ–≥—É—Ç –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è –≤–∞–∂–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –±–æ—Ç —É—à–µ–ª –≤ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫—É. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ `aiogram` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–∏–ø–∞, Redis, Mongo –∏ —Ç.–ø. –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∞–∫–∏—Ö —Ö—Ä–∞–Ω–∏–ª–∏—â, –Ω–æ –º—ã –ø–æ–∫–∞ –æ—Å—Ç–∞–Ω–µ–º—Å—è –≤ —Ä–∞–º–∫–∞—Ö `MemoryStorage`.

–° –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–∞–º–∏ –º—ã —É–∂–µ –≤—Å—Ç—Ä–µ—á–∞–ª–∏—Å—å, –ø–æ—ç—Ç–æ–º—É –Ω–∞ –Ω–∏—Ö –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –Ω–µ –±—É–¥–µ–º.

    # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (—Å–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ MemoryStorage)
    storage: MemoryStorage = MemoryStorage()

`MemoryStorage`, –∫–∞–∫ —è —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª, —ç—Ç–æ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏. –í –∫–∞–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç—Å—è, –∫–∞–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –æ–Ω–∏ –≤–≤–æ–¥–∏–ª–∏ –∏ —Ç.–ø. –ß–µ—Ä–µ–∑ –Ω–µ–≥–æ —Ö—ç–Ω–¥–ª–µ—Ä—ã –º–æ–≥—É—Ç "–æ–±—â–∞—Ç—å—Å—è" –º–µ–∂–¥—É —Å–æ–±–æ–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –Ω—É–∂–Ω–æ–π, –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª–æ–≥–∏–∫–∏ –±–æ—Ç–∞, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ß–∞—â–µ –≤—Å–µ–≥–æ –≤ —Ö—ç–Ω–¥–ª–µ—Ä—ã –º—ã –ø–µ—Ä–µ–¥–∞–µ–º —Ç–æ–ª—å–∫–æ –∞–ø–¥–µ–π—Ç—ã - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ –∏–Ω–æ–≥–¥–∞ –Ω–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ—â–µ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö. –ï–µ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ª–∏–±–æ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –ª–∏–±–æ –∏–∑ —Ç–∞–∫–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

    dp: Dispatcher = Dispatcher(storage=storage)

–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞, –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –º—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∞–∫–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞.

    # –°–æ–∑–¥–∞–µ–º "–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    user_dict: dict[int, dict[str, str | int | bool]] = {}

–¢—É –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä—É—é –º—ã –ø–æ–ª—É—á–∏–º –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –º–∞—à–∏–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π, –Ω—É–∂–Ω–æ –≥–¥–µ-—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ —É–¥–æ–±–Ω–æ–º –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã —Ñ–æ—Ä–º–∞—Ç–µ. –í –æ–±—â–µ–º —Å–ª—É—á–∞–µ - —ç—Ç–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∫–∞–∫–∞—è-–Ω–∏–±—É–¥—å –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö. –ù–æ —Ç–∞–∫ –∫–∞–∫ –º—ã –µ—â–µ –¥–æ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –¥–æ—à–ª–∏, —É –Ω–∞—Å —Å–Ω–æ–≤–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–∞–∫–æ–π "–∏–≥—Ä—É—à–µ—á–Ω–æ–π" –ë–î –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ª–æ–≤–∞—Ä—å. –í –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π —É —Ç–∞–∫–æ–≥–æ —Å–ª–æ–≤–∞—Ä—è –±—É–¥—É—Ç `id` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏–π - —Å–ª–æ–≤–∞—Ä–∏ —Å –¥–∞–Ω–Ω—ã–º–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–º–∏ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π. –í –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–±–æ—Ç—ã –±–æ—Ç–∞, —ç—Ç–æ—Ç —Å–ª–æ–≤–∞—Ä—å –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫.

    user_dict = {173901673: {
                      "name": "–ê—Ä–Ω–æ–ª—å–¥",
                      "age": 45,
                      "gender": "undefined_gender",
                      "photo_unique_id": "AQADfL8xGyZXcEl4",
                      "photo_id": "AgACAgIAAxkBAAIR82OtqD4CMSbFTvitRQNgwhuzf1y1AAJ8vzEbJldwSSpk2bs2OF4_AQADAgADcwADLAQ",
                      "education": "no_edu",
                      "wish_news": False}}

–ü–æ—Ç–æ–º –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–Ω–∫–µ—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ –¥–∞–Ω–Ω—ã—Ö, —Ö—Ä–∞–Ω—è—â–∏—Ö—Å—è –≤ —ç—Ç–æ–π "–±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö".

    # C–æ–∑–¥–∞–µ–º –∫–ª–∞—Å—Å StatesGroup –¥–ª—è –Ω–∞—à–µ–π –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
    class FSMFillForm(StatesGroup):
        # –°–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–∞ State, –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
        # –ø–µ—Ä–µ—á–∏—Å–ª—è—è –≤–æ–∑–º–æ–∂–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è
        # –±–æ—Ç –≤ —Ä–∞–∑–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Ç—Å–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
        fill_name = State()        # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
        fill_age = State()         # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞
        fill_gender = State()      # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
        upload_photo = State()     # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
        fill_education = State()   # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
        fill_wish_news = State()   # –°–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç—å –ª–∏ –Ω–æ–≤–æ—Å—Ç–∏

–î–∞–ª–µ–µ –º—ã —Å–æ–∑–¥–∞–µ–º —Å–≤–æ–π –∫–ª–∞—Å—Å `FSMFillForm`, –Ω–∞—Å–ª–µ–¥—É–µ–º—ã–π –æ—Ç –∫–ª–∞—Å—Å–∞¬†`StatesGroup`, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ–º —Ö—Ä–∞–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É –Ω–∞—à–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ù–∞–∑–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±—ã–º, –Ω–æ –æ–±—ã—á–Ω–æ –ø—Ä–∏–Ω—è—Ç–æ –Ω–∞—á–∏–Ω–∞—Ç—å –µ–≥–æ —Å FSM, —á—Ç–æ–±—ã –±—ã–ª–æ –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –æ–Ω –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –º–∞—à–∏–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π. –í–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –ø–µ—Ä–µ—á–∏—Å–ª—è–µ–º –≤—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, —Å–æ–∑–¥–∞–≤–∞—è —ç–∫–∑–µ–º–ø–ª—è—Ä—ã –∫–ª–∞—Å—Å–∞ `State`. –ò–º–µ–µ—Ç —Å–º—ã—Å–ª —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Ç–∞–∫ –∂–µ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±—É–¥–µ—Ç –ø–æ –Ω–∏–º –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—â–µ–Ω–∏—è —Å –±–æ—Ç–æ–º. –ù–æ –ª–æ–≥–∏–∫–∞ —Ç–∞–∫–æ–≥–æ –æ–±—â–µ–Ω–∏—è, –∫–æ–Ω–µ—á–Ω–æ, –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π, —á–µ–º –ª–∏–Ω–µ–π–Ω–∞—è. –ú–æ–≥—É—Ç –±—ã—Ç—å –≤–µ—Ç–≤–ª–µ–Ω–∏—è, –≤–æ–∑–≤—Ä–∞—Ç—ã –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø–µ—Ä–µ—Å–∫–∞–∫–∏–≤–∞–Ω–∏—è —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π, –ø–µ—Ä–µ—Ö–æ–¥ –≤ –¥—Ä—É–≥–∏–µ –≥—Ä—É–ø–ø—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ —Ç.–ø. –ü–æ—ç—Ç–æ–º—É –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å—Å—è —Å–≤–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ `FSMFillForm`, –ø–æ—ç—Ç–æ–º—É –Ω–µ—Ç –æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–∞–∫-—Ç–æ –ø–µ—Ä–µ–º–µ—à–∞—é—Ç—Å—è –∏–ª–∏ –Ω–∞–ª–æ–∂–∞—Ç—Å—è.

–î–∞–ª–µ–µ –∏–¥—É—Ç —Ö—ç–Ω–¥–ª–µ—Ä—ã.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start –≤–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
    # –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã, –æ—Ç–ø—Ä–∞–≤–∏–≤ –∫–æ–º–∞–Ω–¥—É /fillform
    @dp.message(CommandStart(), StateFilter(default_state))
    async def process_start_command(message: Message):
        await message.answer(text='–≠—Ç–æ—Ç –±–æ—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É FSM\n\n'
                                  '–ß—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã - '
                                  '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /fillform')

–≠—Ç–æ —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —Ö—ç–Ω–¥–ª–µ—Ä, —Å–∞–º—ã–π –ø–µ—Ä–≤—ã–π. –û–Ω –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É /start. –¢–∞–∫–∏–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã –µ—Å—Ç—å –≤ –∫–∞–∂–¥–æ–º –Ω–∞—à–µ–º –±–æ—Ç–µ, –ø–æ—Ç–æ–º—É —á—Ç–æ –ª—é–±–æ–π –±–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∑–∞–ø—É—Å–∫–∞ –∫–æ–º–∞–Ω–¥–æ–π /start. –ù–æ —Ç–µ–ø–µ—Ä—å –ø–æ—è–≤–∏–ª—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä `StateFilter(default_state)`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–ø—É—Å—Ç–∏—Ç –∞–ø–¥–µ–π—Ç –≤ —Ö—ç–Ω–¥–ª–µ—Ä —Ç–æ–ª—å–∫–æ, –µ—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ /start –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é", —Ç–æ –µ—Å—Ç—å, –ø–æ–∫–∞ –Ω–∞–º–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–∞–∫–∏–µ-—Ç–æ –¥—Ä—É–≥–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

![](https://ucarecdn.com/d9c2a6a0-bc0b-47ce-ac05-315090c6ce78/-/preview/-/enhance/77/)

–°–ª–µ–¥—É—é—â–∏–π —Ö—ç–Ω–¥–ª–µ—Ä - —ç—Ç–æ —Ö—ç–Ω–¥–ª–µ—Ä –Ω–∞ –∫–æ–º–∞–Ω–¥—É /cancel –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é".

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É "/cancel" –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
    # –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —Å–æ–æ–±—â–∞—Ç—å, —á—Ç–æ —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
    @dp.message(Command(commands='cancel'), StateFilter(default_state))
    async def process_cancel_command(message: Message):
        await message.answer(text='–û—Ç–º–µ–Ω—è—Ç—å –Ω–µ—á–µ–≥–æ. –í—ã –≤–Ω–µ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π\n\n'
                                  '–ß—Ç–æ–±—ã –ø–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã - '
                                  '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /fillform')

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∞–Ω–∫–µ—Ç—ã, —Ç–æ –µ—Å—Ç—å –≤–Ω—É—Ç—Ä–∏ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π, –º–æ–∂–Ω–æ –±—É–¥–µ—Ç —á–µ—Ä–µ–∑ –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ–º–∞–Ω–¥—ã /cancel –≤—ã—Ö–æ–¥–∏—Ç—å –∏–∑ FSM –∏ —É–¥–∞–ª—è—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ, –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –µ–µ —Ä–∞–±–æ—Ç—ã. –ù–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é" –Ω–µ—Ç –Ω–∏–∫–∞–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–æ—ç—Ç–æ–º—É —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –Ω–µ—á–µ–≥–æ –∏ –ª–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã –≤–Ω—É—Ç—Ä–∏ FSM –∏ –≤–Ω–µ –µ–µ –¥–æ–ª–∂–Ω–∞ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è. –í–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –º—ã –ø—Ä–æ—Å—Ç–æ —Å–æ–æ–±—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –∑–¥–µ—Å—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã –Ω–∏ –∫ —á–µ–º—É –Ω–µ –ø—Ä–∏–≤–µ–¥–µ—Ç.

![](https://ucarecdn.com/6bac92f1-5c4f-4fe4-a24b-a60a355b5bd4/-/preview/-/enhance/77/)

–ó–∞—Ç–µ–º –∏–¥–µ—Ç —Ö—ç–Ω–¥–ª–µ—Ä, —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π –Ω–∞ –∫–æ–º–∞–Ω–¥—É /cancel –≤ –ª—é–±—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö, –∫—Ä–æ–º–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é".

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É "/cancel" –≤ –ª—é–±—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö,
    # –∫—Ä–æ–º–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∏ –æ—Ç–∫–ª—é—á–∞—Ç—å –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π
    @dp.message(Command(commands='cancel'), ~StateFilter(default_state))
    async def process_cancel_command_state(message: Message, state: FSMContext):
        await message.answer(text='–í—ã –≤—ã—à–ª–∏ –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π\n\n'
                                  '–ß—Ç–æ–±—ã —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ–π—Ç–∏ –∫ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—é –∞–Ω–∫–µ—Ç—ã - '
                                  '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /fillform')
        # –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –æ—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π
        await state.clear()

–í –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∞–Ω–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –ø–µ—Ä–µ–¥—É–º–∞—Ç—å –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –µ–µ –∑–∞–ø–æ–ª–Ω—è—Ç—å. –£ –Ω–µ–≥–æ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–π—Ç–∏ –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ö–æ–º–∞–Ω–¥–∞ /cancel –ø—Ä–∏–∑–≤–∞–Ω–∞ –µ–º—É –≤ —ç—Ç–æ–º –ø–æ–º–æ—á—å. –ß—Ç–æ–±—ã –æ—Ç–ª–æ–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≤ –ª—é–±–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∫—Ä–æ–º–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ - —Å—Ç–∞–≤—è—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä¬†`~StateFilter(default_state)`, –≥–¥–µ¬†`~` –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è. –¢–æ –µ—Å—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∞–ø–¥–µ–π—Ç—ã –≤ —Ö—ç–Ω–¥–ª–µ—Ä –≤ –ª—é–±–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∫—Ä–æ–º–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é".

–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç¬†/cancel, –Ω–∞—Ö–æ–¥—è—Å—å –≤–Ω—É—Ç—Ä–∏ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π - –µ–º—É –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –æ–Ω –≤—ã—à–µ–ª –∏–∑ FSM –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –æ—á–∏—â–∞–µ—Ç—Å—è -¬†`await state.clear()`. –¢–æ –µ—Å—Ç—å —Å—Ç–∏—Ä–∞–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏ –¥–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –∞ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω—É–ª—è—é—Ç—Å—è.

¬†![](https://ucarecdn.com/967e7bfb-ed8b-4872-a5a5-985a135dde56/-/preview/-/enhance/80/)

–î–∞–ª–µ–µ –∏–¥–µ—Ç —Ö—ç–Ω–¥–ª–µ—Ä, —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π –Ω–∞ –∫–æ–º–∞–Ω–¥—É /fillform –≤ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—É /fillform
    # –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –±–æ—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
    @dp.message(Command(commands='fillform'), StateFilter(default_state))
    async def process_fillform_command(message: Message, state: FSMContext):
        await message.answer(text='–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è')
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
        await state.set_state(FSMFillForm.fill_name)

–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤ —á–∞—Ç –∫–æ–º–∞–Ω–¥—É /fillform - –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–µ—Ä–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - `await state.set_state(FSMFillForm.fill_name)` –∏ –±–æ—Ç –∑–∞–≤–∏—Å–Ω–µ—Ç –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏.

![](https://ucarecdn.com/7b0855fd-5ad4-4de4-a773-98cd43622c81/-/preview/-/enhance/79/)

–°–ª–µ–¥—É—é—â–∏–º —Ö—ç–Ω–¥–ª–µ—Ä–æ–º –∏–¥–µ—Ç —Ö—ç–Ω–¥–ª–µ—Ä, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–≤–µ–¥–µ–Ω–Ω–æ–µ –∏–º—è.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–≤–µ–¥–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è
    # –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞
    @dp.message(StateFilter(FSMFillForm.fill_name), F.text.isalpha())
    async def process_name_sent(message: Message, state: FSMContext):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –≤–≤–µ–¥–µ–Ω–Ω–æ–µ –∏–º—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ –∫–ª—é—á—É "name"
        await state.update_data(name=message.text)
        await message.answer(text='–°–ø–∞—Å–∏–±–æ!\n\n–ê —Ç–µ–ø–µ—Ä—å –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–∑—Ä–∞—Å—Ç')
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞
        await state.set_state(FSMFillForm.fill_age)

–ú—ã —Å –≤–∞–º–∏ –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å, —á—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –±—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –±—É–∫–≤, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –º–∞–≥–∏—á–µ—Å–∫–∏–π —Ñ–∏–ª—å—Ç—Ä¬†`F.text.isalpha()`, –∫–æ—Ç–æ—Ä—ã–π, –≤–æ-–ø–µ—Ä–≤—ã—Ö, –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ–±—ã —É –∞–ø–¥–µ–π—Ç–∞ –ø–æ–ª–µ "text" –Ω–µ –±—ã–ª–æ –ø—É—Å—Ç—ã–º, –∞ –≤–æ-–≤—Ç–æ—Ä—ã—Ö, —á—Ç–æ–±—ã –æ–Ω–æ —Å–æ–¥–µ—Ä–∂–∞–ª–æ —Ç–æ–ª—å–∫–æ –±—É–∫–≤—ã. –í—Ç–æ—Ä–æ–π —Ñ–∏–ª—å—Ç—Ä —É —Ö—ç–Ω–¥–ª–µ—Ä–∞ - —ç—Ç–æ —Ñ–∏–ª—å—Ç—Ä —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ç–æ—Ä–æ–µ –º—ã —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É /fillname¬†-¬†`StateFilter(FSMFillForm.fill_name)`.

–ö–∞–∫ —Ç–æ–ª—å–∫–æ, –Ω–∞—Ö–æ–¥—è—Å—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `FSMFillForm.fill_name`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è - –Ω–µ–ø—É—Å—Ç–æ–π —Ç–µ–∫—Å—Ç, —Å–æ—Å—Ç–æ—è—â–∏–π —Ç–æ–ª—å–∫–æ –∏–∑ –±—É–∫–≤, —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä.¬†–í –Ω–µ–≥–æ, –ø–æ–º–∏–º–æ –∞–ø–¥–µ–π—Ç–∞ `message: Message`, –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - –∫–æ–Ω—Ç–µ–∫—Å—Ç `state: FSMContext`. –£ –æ–±—ä–µ–∫—Ç–∞ `state` –µ—Å—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã `get_data()` –∏ `get_state()`, –ø–æ –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–Ω—É—Ç—Ä–∏ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å. –ï—Å–ª–∏ –≤—ã–≤–µ—Å—Ç–∏ –ø—Ä–∏–Ω—Ç–æ–º –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç—Ç–∏—Ö –º–µ—Ç–æ–¥–æ–≤:

    # ...
    
    @dp.message(StateFilter(FSMFillForm.fill_name), F.text.isalpha())
    async def process_name_sent(message: Message, state: FSMContext):
        print(await state.get_data())
        print(await state.get_state())
    
    # ...

–¢–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ —ç—Ç–æ—Ç —Å–∞–º—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç:

    {}
    FSMFillForm:fill_name

–î–∞–Ω–Ω—ã—Ö –ø–æ–∫–∞ –Ω–µ—Ç, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –∏—Ö –µ—â–µ –Ω–µ —É—Å–ø–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å, –∞, –≤–æ—Ç, —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–æ–≤–Ω–æ —Ç–æ, –∫–æ—Ç–æ—Ä–æ–µ –º—ã –æ–∂–∏–¥–∞–µ–º.

–¢–∞–∫ –∫–∞–∫ –≤ —Ö—ç–Ω–¥–ª–µ—Ä –ø—Ä–∏—à–µ–ª –∞–ø–¥–µ–π—Ç —Å –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–º –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —ç—Ç–æ –∏–º—è –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å. –ú–æ–∂–Ω–æ, –∫–æ–Ω–µ—á–Ω–æ, —Å—Ä–∞–∑—É —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –µ–≥–æ –≤ –±–∞–∑—É, –Ω–æ –µ—Å—Ç—å –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–µ—Ä–≤–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã, –∞ –Ω–∞–º, –¥–æ–ø—É—Å—Ç–∏–º –Ω—É–∂–Ω—ã –ª–∏–±–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –Ω–µ–≥–æ, –ª–∏–±–æ –Ω–∏–∫–∞–∫–∏–µ. –ü–æ—ç—Ç–æ–º—É –≤—Ä–µ–º–µ–Ω–Ω–æ, –ø–æ–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–Ω—É—Ç—Ä–∏ FSM, –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –î–µ–ª–∞–µ—Ç—Å—è —ç—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –º–µ—Ç–æ–¥–æ–º —É –æ–±—ä–µ–∫—Ç–∞ `state` - `update_data()`, –∫–æ—Ç–æ—Ä–æ–º—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –∫–ª—é—á–∏ –∏ –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è:

    await state.update_data(name=message.text)

–¢–æ –µ—Å—Ç—å –ø–æ –∫–ª—é—á—É `'name'` –º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–º–µ–Ω–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –∞–ø–¥–µ–π—Ç–∞. –ï—Å–ª–∏ —Ç–µ–ø–µ—Ä—å –≤—ã–≤–µ—Å—Ç–∏ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª —Ä–µ–∑—É–ª—å—Ç–∞—Ç –º–µ—Ç–æ–¥–∞ `get_data()` —É –æ–±—ä–µ–∫—Ç–∞ `state`,

    # ...
    
    # C–æ—Ö—Ä–∞–Ω—è–µ–º –≤–≤–µ–¥–µ–Ω–Ω–æ–µ –∏–º—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ –∫–ª—é—á—É "name"
        await state.update_data(name=message.text)
        print(await state.get_data())
    
    # ...

—Ç–æ —É–≤–∏–¥–∏–º –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–∞–Ω–Ω—ã–µ:

    {'name': '–≠–¥–≥–∞—Ä'}

–î–∞–ª–µ–µ –≤ —Ö—ç–Ω–¥–ª–µ—Ä–µ –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –≤–≤–µ—Å—Ç–∏ –≤–æ–∑—Ä–∞—Å—Ç –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π `await state.set_state(FSMFillForm.fill_age)`. –ë–æ—Ç –∑–∞–≤–∏—Å–∞–µ—Ç –≤ –æ–∂–∏–¥–∞–Ω–∏–∏ –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

![](https://ucarecdn.com/cd0e02cd-f0f4-4871-811c-879ce3cfbbed/-/preview/-/enhance/77/)

–î–∞–ª–µ–µ –ø–æ –∫–æ–¥—É –∏–¥–µ—Ç —Ö—ç–Ω–¥–ª–µ—Ä `warning_not_name`.¬†

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
    # –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.fill_name))
    async def warning_not_name(message: Message):
        await message.answer(text='–¢–æ, —á—Ç–æ –≤—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –Ω–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ –∏–º—è\n\n'
                                  '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –∏–º—è\n\n'
                                  '–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - '
                                  '–æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /cancel')

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —ç—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –∏–¥–µ—Ç –ø–æ—Å–ª–µ —Ö—ç–Ω–¥–ª–µ—Ä–∞ `process_name_sent`, –ø–æ—Ç–æ–º—É —á—Ç–æ –µ—Å–ª–∏ –æ–Ω –±—É–¥–µ—Ç –∏–¥—Ç–∏ –¥–æ, —Ç–æ –¥–æ `process_name_sent` –æ—á–µ—Ä–µ–¥—å –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–π–¥–µ—Ç, –≤–µ–¥—å —Ñ–∏–ª—å—Ç—Ä —É¬†`warning_not_name`¬†–Ω–∞—Å—Ç—Ä–æ–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –±—É–¥–µ—Ç –∑–∞–±–∏—Ä–∞—Ç—å –≤—Å–µ –∞–ø–¥–µ–π—Ç—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏¬†`FSMFillForm.fill_name`. –ê –Ω–∞–º, –≤—Å–µ-—Ç–∞–∫–∏ –≤ —ç—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –µ—â–µ –Ω—É–∂–Ω–æ –ª–æ–≤–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–≤–µ–¥–µ–Ω–Ω–æ–µ –∏–º—è.

–ü–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç—Å—è, —á—Ç–æ –µ—Å–ª–∏ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏¬†`FSMFillForm.fill_name`¬†–≤–≤–µ–¥–µ–Ω–æ —á—Ç–æ-—Ç–æ –æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç –∏–º–µ–Ω–∏ (–∞ —Ç–∞–∫–∂–µ –∫–æ–º–∞–Ω–¥—ã¬†/cancel, –∫–æ—Ç–æ—Ä–∞—è —Ç–æ–∂–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤–Ω—É—Ç—Ä–∏ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π) - –Ω—É–∂–Ω–æ —Å–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ —Ç–æ–º, —á—Ç–æ –æ–∂–∏–¥–∞–µ—Ç—Å—è –∏–º–µ–Ω–Ω–æ –∏–º—è –∏–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –æ—Ç–º–µ–Ω—ã.

![](https://ucarecdn.com/94e02592-13bc-4942-8419-3aba57015c1a/-/preview/-/enhance/79/)

–°–ª–µ–¥—É—é—â–∏–º –ø–æ –∫–æ–¥—É –∏–¥–µ—Ç —Ö—ç–Ω–¥–ª–µ—Ä¬†`process_age_sent`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–≤–µ–¥–µ–Ω–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç, —Ç–æ –µ—Å—Ç—å —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –æ—Ç 4 –¥–æ 120 –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–≤–µ–¥–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç
    # –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
    @dp.message(StateFilter(FSMFillForm.fill_age),
                lambda x: x.text.isdigit() and 4 <= int(x.text) <= 120)
    async def process_age_sent(message: Message, state: FSMContext):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –≤–æ–∑—Ä–∞—Å—Ç –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –ø–æ –∫–ª—é—á—É "age"
        await state.update_data(age=message.text)
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–æ–∫
        male_button = InlineKeyboardButton(text='–ú—É–∂—Å–∫–æ–π ‚ôÇ',
                                           callback_data='male')
        female_button = InlineKeyboardButton(text='–ñ–µ–Ω—Å–∫–∏–π ‚ôÄ',
                                             callback_data='female')
        undefined_button = InlineKeyboardButton(text='ü§∑ –ü–æ–∫–∞ –Ω–µ —è—Å–Ω–æ',
                                                callback_data='undefined_gender')
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (–¥–≤–µ –≤ –æ–¥–Ω–æ–º —Ä—è–¥—É –∏ –æ–¥–Ω—É –≤ –¥—Ä—É–≥–æ–º)
        keyboard: list[list[InlineKeyboardButton]] = [[male_button, female_button],
                                                      [undefined_button]]
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        markup = InlineKeyboardMarkup(inline_keyboard=keyboard)
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        await message.answer(text='–°–ø–∞—Å–∏–±–æ!\n\n–£–∫–∞–∂–∏—Ç–µ –≤–∞—à –ø–æ–ª',
                             reply_markup=markup)
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
        await state.set_state(FSMFillForm.fill_gender)

–§–∏–ª—å—Ç—Ä—ã –ø—Ä–æ–ø—É—Å—Ç—è—Ç –∞–ø–¥–µ–π—Ç –≤ —ç—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä, –µ—Å–ª–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±—É–¥–µ—Ç¬†`FSMFillForm.fill_age`, –∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ –ø–æ–ª–µ —É –∞–ø–¥–µ–π—Ç–∞ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –∏–∑ –∂–µ–ª–∞–µ–º–æ–≥–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞. –ó–¥–µ—Å—å —è –Ω–µ —Å—Ç–∞–ª –∑–∞–º–æ—Ä–∞—á–∏–≤–∞—Ç—å—Å—è –∏ –ø–∏—Å–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä-–∫–ª–∞—Å—Å, –∞ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –∞–Ω–æ–Ω–∏–º–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–µ–π¬†`lambda x: x.text.isdigit() and 4 <= int(x.text) <= 120`.

–¢–∞–∫ –∂–µ –∫–∞–∫ –º—ã —Å–æ—Ö—Ä–∞–Ω—è–ª–∏ –∏–º—è - —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤–æ–∑—Ä–∞—Å—Ç -¬†`await state.update_data(age=message.text)`, –ø–æ—Å–ª–µ —á–µ–≥–æ —Ñ–æ—Ä–º–∏—Ä—É–µ–º –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø—É–Ω–∫—Ç–∞ –∞–Ω–∫–µ—Ç—ã - –≤—ã–±–æ—Ä –ø–æ–ª–∞. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É —Å –≤—ã–±–æ—Ä–æ–º –ø–æ–ª–∞.

![](https://ucarecdn.com/806c0198-3a62-4ae6-8e47-d2f1c711023c/-/preview/-/enhance/76/)

–ï—Å–ª–∏ –∂–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–∂–∏–¥–∞–Ω–∏—è –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ —á—Ç–æ-—Ç–æ –æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç —Ü–µ–ª–æ–≥–æ —á–∏—Å–ª–∞ –∏–∑ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ \[4; 120\] - —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ö—ç–Ω–¥–ª–µ—Ä¬†¬†`warning_not_age`.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞
    # –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.fill_age))
    async def warning_not_age(message: Message):
        await message.answer(
            text='–í–æ–∑—Ä–∞—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ü–µ–ª—ã–º —á–∏—Å–ª–æ–º –æ—Ç 4 –¥–æ 120\n\n'
                 '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑\n\n–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å '
                 '–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /cancel')

–ï–≥–æ —Å–º—ã—Å–ª —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ, –∫–∞–∫ –∏ —É —Ö—ç–Ω–¥–ª–µ—Ä–∞ `warning_not_name`, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞–∑–±–∏—Ä–∞–ª–∏ —Ä–∞–Ω–µ–µ. `warning_not_age` –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ª—é–±–æ–≥–æ —Ç–∏–ø–∞ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≤–≤–æ–¥–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞, –∏ —Ç–æ—á–Ω–æ —Ç–∞–∫–∂–µ –æ–Ω –¥–æ–ª–∂–µ–Ω –∏–¥—Ç–∏ –ø–æ –∫–æ–¥—É –ø–æ–∑–∂–µ, —á–µ–º —Ö—ç–Ω–¥–ª–µ—Ä, —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—â–∏–π –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–≤–µ–¥–µ–Ω–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç.

![](https://ucarecdn.com/2b6f3dae-412b-4585-9552-cee9509b52e5/-/preview/-/enhance/80/)

–î–∞–ª–µ–µ –∏–¥–µ—Ç —Ö—ç–Ω–¥–ª–µ—Ä¬†`process_gender_press`.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏
    # –≤—ã–±–æ—Ä–µ –ø–æ–ª–∞ –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ
    @dp.callback_query(StateFilter(FSMFillForm.fill_gender),
                       Text(text=['male', 'female', 'undefined_gender']))
    async def process_gender_press(callback: CallbackQuery, state: FSMContext):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª (callback.data –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–∏) –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ,
        # –ø–æ –∫–ª—é—á—É "gender"
        await state.update_data(gender=callback.data)
        # –£–¥–∞–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–∞–º–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π —ç—Ç–∞–ø - –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ
        # —á—Ç–æ–±—ã —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –±—ã–ª–æ –∂–µ–ª–∞–Ω–∏—è —Ç—ã–∫–∞—Ç—å –∫–Ω–æ–ø–∫–∏
        await callback.message.delete()
        await callback.message.answer(text='–°–ø–∞—Å–∏–±–æ! –ê —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∑–∏—Ç–µ, '
                                           '–ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–∞—à–µ —Ñ–æ—Ç–æ')
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ
        await state.set_state(FSMFillForm.upload_photo)

–ï–≥–æ –∑–∞–¥–∞—á–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∞–ø–¥–µ–π—Ç—ã –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `FSMFillForm.fill_gender`, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –Ω–∞–∂–∞—Ç–∏–µ–º –Ω–∞ –∫–Ω–æ–ø–∫–∏ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ –≤ –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ.

–ö–∞–∫ –∏–º–µ–Ω–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏ –º—ã —Å –≤–∞–º–∏ —É–∂–µ –∑–Ω–∞–µ–º. –ù—É–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –∞–ø–¥–µ–π—Ç—ã —Ç–∏–ø–∞ `CallbackQuery` –ø–æ `callack.data`. –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏ —Å –≤—ã–±–æ—Ä–æ–º –ø–æ–ª–∞ `await state.update_data(gender=callback.data)`, –Ω—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π `await callback.message.delete()`, —á—Ç–æ–±—ã –æ–Ω–æ –Ω–µ —Å–º—É—â–∞–ª–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ –µ–º—É –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ. –°–æ–æ–±—â–∞–µ–º –æ–± —ç—Ç–æ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –æ—Ç–ø—Ä–∞–≤–ª—è—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ `FSMFillForm.upload_photo`.¬†

![](https://ucarecdn.com/d2ba26b9-891d-4850-a3b8-963e22704d8f/-/preview/-/enhance/81/)

–ù–∞ —Ö—ç–Ω–¥–ª–µ—Ä–µ¬†`warning_not_gender` –ø–æ–¥—Ä–æ–±–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –Ω–µ –±—É–¥–µ–º, –¥—É–º–∞—é, –≤—ã —É–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç–µ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å –ø–æ—Ö–æ–∂–∏–º–∏, —Ä–∞–∑–æ–±—Ä–∞–Ω–Ω—ã–º–∏ –≤—ã—à–µ.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞
    # –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ/–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.fill_gender))
    async def warning_not_gender(message: Message):
        await message.answer(text='–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –∫–Ω–æ–ø–∫–∞–º–∏ '
                                  '–ø—Ä–∏ –≤—ã–±–æ—Ä–µ –ø–æ–ª–∞\n\n–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å '
                                  '–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /cancel')

–û–Ω —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `fill_gender`, –Ω–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–∫–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –∏–¥–µ—Ç –≤ –∫–æ–¥–µ –ø–æ–∑–∂–µ, —á–µ–º —Ö—ç–Ω–¥–ª–µ—Ä¬†`process_gender_press`, –∫–æ—Ç–æ—Ä—ã–π –∏ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–æ–∫ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `FSMFillForm.fill_gender`.

![](https://ucarecdn.com/1a7c8438-bf05-44df-9b93-62a173ad6fd4/-/preview/-/enhance/78/)

–°–ª–µ–¥—É—é—â–∏–π —Ö—ç–Ω–¥–ª–µ—Ä¬†`process_photo_sent` –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–∏—Ç –≤ —á–∞—Ç —Å –±–æ—Ç–æ–º —Ñ–æ—Ç–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –æ–∂–∏–¥–∞–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ `FSMFillForm.upload_photo`.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Ñ–æ—Ç–æ
    # –∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
    @dp.message(StateFilter(FSMFillForm.upload_photo),
                F.photo[-1].as_('largest_photo'))
    async def process_photo_sent(message: Message,
                                 state: FSMContext,
                                 largest_photo: PhotoSize):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ (file_unique_id –∏ file_id) –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
        # –ø–æ –∫–ª—é—á–∞–º "photo_unique_id" –∏ "photo_id"
        await state.update_data(photo_unique_id=largest_photo.file_unique_id,
                                photo_id=largest_photo.file_id)
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç—ã –∏–Ω–ª–∞–π–Ω-–∫–Ω–æ–ø–æ–∫
        secondary_button = InlineKeyboardButton(text='–°—Ä–µ–¥–Ω–µ–µ',
                                                callback_data='secondary')
        higher_button = InlineKeyboardButton(text='–í—ã—Å—à–µ–µ',
                                             callback_data='higher')
        no_edu_button = InlineKeyboardButton(text='ü§∑ –ù–µ—Ç—É',
                                             callback_data='no_edu')
        # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ –≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (–¥–≤–µ –≤ –æ–¥–Ω–æ–º —Ä—è–¥—É –∏ –æ–¥–Ω—É –≤ –¥—Ä—É–≥–æ–º)
        keyboard: list[list[InlineKeyboardButton]] = [
                            [secondary_button, higher_button],
                            [no_edu_button]]
        # –°–æ–∑–¥–∞–µ–º –æ–±—ä–µ–∫—Ç –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
        markup = InlineKeyboardMarkup(inline_keyboard=keyboard)
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
        await message.answer(text='–°–ø–∞—Å–∏–±–æ!\n\n–£–∫–∞–∂–∏—Ç–µ –≤–∞—à–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ',
                             reply_markup=markup)
        # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è –≤—ã–±–æ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è
        await state.set_state(FSMFillForm.fill_education)

–° –ø–æ–º–æ—â—å—é –º–∞–≥–∏—á–µ—Å–∫–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞¬†`F.photo[-1].as_('largest_photo')` –º—ã –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä—É–µ–º –∞–ø–¥–µ–π—Ç –ø–æ —Ç–∏–ø—É –∫–æ–Ω—Ç–µ–Ω—Ç–∞ `'photo'`, –Ω–æ –∏ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–¥–∞–µ–º –≤ —Ö—ç–Ω–¥–ª–µ—Ä –æ–±—ä–µ–∫—Ç —Ñ–æ—Ç–æ —Ç–∏–ø–∞ `PhotoSize`¬†—Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ–º - –ø–æ –∫–ª—é—á—É `'largest_photo'`. –ú—ã —É–∂–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –≤ —Ö—ç–Ω–¥–ª–µ—Ä—ã –≤ [—É—Ä–æ–∫–µ](https://stepik.org/lesson/891577/step/10?unit=896427), –ø–æ—Å–≤—è—â–µ–Ω–Ω–æ–º —Ñ–∏–ª—å—Ç—Ä–∞–º. –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ —Ñ–æ—Ç–æ –∫–∞–∫ –æ–±—ã—á–Ω–æ, —Å –ø–æ–º–æ—â—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ `update_data()`. –°–æ—Ö—Ä–∞–Ω–∏–º, –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –∏ `'file_id'` –∏ `'file_unique_id'`. –ó–∞—Ç–µ–º —Å—Ñ–æ—Ä–º–∏—Ä—É–µ–º –∏–Ω–ª–∞–π–Ω-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤—ã–±–æ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–∏–º –µ–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º —É–∫–∞–∑–∞—Ç—å –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –ø–æ—Å–ª–µ —á–µ–≥–æ —É—Å—Ç–∞–Ω–æ–≤–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è¬†`FSMFillForm.fill_education`.

![](https://ucarecdn.com/b2f893f6-b556-4509-8d87-169237c81e23/-/preview/-/enhance/78/)

–°–ª–µ–¥—É—é—â–∏–π —Ö—ç–Ω–¥–ª–µ—Ä —É–∂–µ –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ –Ω–∞–º —Ç–∏–ø–∞¬†`warning_not_photo` ¬†- —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–∞ –≤—Å–µ –ø–æ–¥—Ä—è–¥ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ `upload_photo`, –∫—Ä–æ–º–µ, —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ, —Ñ–æ—Ç–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Ö—ç–Ω–¥–ª–µ—Ä¬†`process_photo_sent`.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å, –µ—Å–ª–∏ –≤–æ –≤—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ
    # –±—É–¥–µ—Ç –≤–≤–µ–¥–µ–Ω–æ/–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —á—Ç–æ-—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ
    @dp.message(StateFilter(FSMFillForm.upload_photo))
    async def warning_not_photo(message: Message):
        await message.answer(text='–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ '
                                  '–≤–∞—à–µ —Ñ–æ—Ç–æ\n\n–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–µ—Ä–≤–∞—Ç—å '
                                  '–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /cancel')

–õ–æ–≥–∏–∫–∞ –µ–≥–æ —Ä–∞–±–æ—Ç—ã —Ç–æ—á–Ω–æ —Ç–∞–∫–∞—è –∂–µ, –∫–∞–∫ —É –¥—Ä—É–≥–∏—Ö –ø–æ–¥–æ–±–Ω—ã—Ö —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤.

![](https://ucarecdn.com/63eaefa6-2ca5-4fab-b65c-94d51d2285a9/-/preview/-/enhance/78/)

–ö–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã -¬†`process_education_press`, `warning_not_education`¬†–∏ `warning_not_wish_news` –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –Ω–µ –±—É–¥—É. –î—É–º–∞—é, –∏—Ö —Ä–∞–±–æ—Ç–∞ –ø–æ–Ω—è—Ç–Ω–∞ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ - —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Ö —Å–∞–º–∏. –û—Å—Ç–∞–Ω–æ–≤–ª—é—Å—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ –Ω–∞ —Ö—ç–Ω–¥–ª–µ—Ä–µ¬†`process_wish_news_press`, –ø–æ—Ç–æ–º—É —á—Ç–æ –≤ —ç—Ç–æ–º —Ö—ç–Ω–¥–ª–µ—Ä–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –Ω–∞—à—É "–∏–≥—Ä—É—à–µ—á–Ω—É—é" –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –≤—ã–±–æ—Ä –ø–æ–ª—É—á–∞—Ç—å –∏–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏
    # –∏ –≤—ã–≤–æ–¥–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
    @dp.callback_query(StateFilter(FSMFillForm.fill_wish_news),
                       Text(text=['yes_news', 'no_news']))
    async def process_wish_news_press(callback: CallbackQuery, state: FSMContext):
        # C–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –æ –ø–æ–ª—É—á–µ–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ –∫–ª—é—á—É "wish_news"
        await state.update_data(wish_news=callback.data == 'yes_news')
        # –î–æ–±–∞–≤–ª—è–µ–º –≤ "–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö" –∞–Ω–∫–µ—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        # –ø–æ –∫–ª—é—á—É id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        user_dict[callback.from_user.id] = await state.get_data()
        # –ó–∞–≤–µ—Ä—à–∞–µ–º –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π
        await state.clear()
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –≤—ã—Ö–æ–¥–µ –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
        await callback.message.edit_text(text='–°–ø–∞—Å–∏–±–æ! –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!\n\n'
                                              '–í—ã –≤—ã—à–ª–∏ –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π')
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ —á–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ—é –∞–Ω–∫–µ—Ç—É
        await callback.message.answer(text='–ß—Ç–æ–±—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ –≤–∞—à–µ–π '
                                           '–∞–Ω–∫–µ—Ç—ã - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É /showdata')

–°–Ω–∞—á–∞–ª–∞, –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Ö—ç–Ω–¥–ª–µ—Ä–∞, –∫–∞–∫ –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ¬†`await state.update_data(wish_news=callback.data == 'yes_news')`, –≤ –≤–∏–¥–µ –±—É–ª–µ–≤–∞ –∑–Ω–∞—á–µ–Ω–∏—è `True`/`False` –∏, —Ç–∞–∫ –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `FSMFillForm.fill_wish_news` - —ç—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π - –Ω—É–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤—Å–µ —Å–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ –Ω–∞—à—É "–±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö", —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ—Ç–æ–º –∏–º–∏ –∫–∞–∫-—Ç–æ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞—Ç—å. –î–ª—è —ç—Ç–æ–≥–æ –≤ —Å–ª–æ–≤–∞—Ä—å "–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"¬†`user_dict` –ø–æ –∫–ª—é—á—É <id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è>, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–Ω–∞—á–µ–Ω–∏—è, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—É—á–∏–≤—à–∏–π—Å—è —Å–ª–æ–≤–∞—Ä—å —Å –¥–∞–Ω–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞. –î–æ—Å—Ç—É–ø –∫ –Ω–µ–º—É, –∫–∞–∫ –≤—ã —É–∂–µ –∑–Ω–∞–µ—Ç–µ, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Å –ø–æ–º–æ—â—å—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞ `await state.get_data()`. –ó–∞—Ç–µ–º —Å–±—Ä–∞—Å—ã–≤–∞–µ–º/–∑–∞–≤–µ—Ä—à–∞–µ–º –º–∞—à–∏–Ω—É —Å–æ—Å—Ç–æ—è–Ω–∏–π¬† -¬†`await state.clear()`. –°–æ–æ–±—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –æ–Ω –≤—ã—à–µ–ª –∏–∑ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π, –∞ —Ç–∞–∫–∂–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ—â–µ –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–ª—É—á–∏–≤—à—É—é—Å—è –∞–Ω–∫–µ—Ç—É, –æ—Ç–ø—Ä–∞–≤–∏–≤ –∫–æ–º–∞–Ω–¥—É /showdata.¬†

![](https://ucarecdn.com/d4963398-7930-4410-9a83-0368ffcfd039/-/preview/-/enhance/81/)

–û—Å—Ç–∞–ª–æ—Å—å —Ä–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –¥–≤–∞ —Ö—ç–Ω–¥–ª–µ—Ä–∞ -¬†`process_showdata_command`¬†–∏ `send_echo`. –ü–µ—Ä–≤—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–æ–∫–∞–∑ –∞–Ω–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –µ—Å–ª–∏ –æ–Ω –∑–∞–ø–æ–ª–Ω—è–ª –¥–∞–Ω–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã, –∞ –≤–æ –≤—Ç–æ—Ä–æ–π –ø–æ–ø–∞–¥–∞—é—Ç –≤—Å–µ –∞–ø–¥–µ–π—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–ø–∞–ª–∏ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã. –° –ø–µ—Ä–≤—ã–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—Å–µ –ø–æ–Ω—è—Ç–Ω–æ.

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –∫–æ–º–∞–Ω–¥—ã /showdata
    # –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –≤ —á–∞—Ç –¥–∞–Ω–Ω—ã–µ –∞–Ω–∫–µ—Ç—ã, –ª–∏–±–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –¥–∞–Ω–Ω—ã—Ö
    @dp.message(Command(commands='showdata'), StateFilter(default_state))
    async def process_showdata_command(message: Message):
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∞–Ω–∫–µ—Ç—É, –µ—Å–ª–∏ –æ–Ω–∞ –µ—Å—Ç—å –≤ "–±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö"
        if message.from_user.id in user_dict:
            await message.answer_photo(
                photo=user_dict[message.from_user.id]['photo_id'],
                caption=f'–ò–º—è: {user_dict[message.from_user.id]["name"]}\n'
                        f'–í–æ–∑—Ä–∞—Å—Ç: {user_dict[message.from_user.id]["age"]}\n'
                        f'–ü–æ–ª: {user_dict[message.from_user.id]["gender"]}\n'
                        f'–û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ: {user_dict[message.from_user.id]["education"]}\n'
                        f'–ü–æ–ª—É—á–∞—Ç—å –Ω–æ–≤–æ—Å—Ç–∏: {user_dict[message.from_user.id]["wish_news"]}')
        else:
            # –ï—Å–ª–∏ –∞–Ω–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑–µ –Ω–µ—Ç - –ø—Ä–µ–¥–ª–∞–≥–∞–µ–º –∑–∞–ø–æ–ª–Ω–∏—Ç—å
            await message.answer(text='–í—ã –µ—â–µ –Ω–µ –∑–∞–ø–æ–ª–Ω—è–ª–∏ –∞–Ω–∫–µ—Ç—É. '
                                      '–ß—Ç–æ–±—ã –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ '
                                      '–∫–æ–º–∞–Ω–¥—É /fillform')

–î–∞–Ω–Ω—ã–µ, –µ—Å–ª–∏ –æ–Ω–∏ —Ç–∞–º –µ—Å—Ç—å, –±–µ—Ä—É—Ç—Å—è –∏–∑ "–±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö", —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É—é—Ç—Å—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ –≤–∏–¥–µ —Ñ–æ—Ç–æ —Å –ø–æ–¥–ø–∏—Å—å—é. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç - –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –µ—â–µ –∞–Ω–∫–µ—Ç—É –Ω–µ –∑–∞–ø–æ–ª–Ω—è–ª. –î–∞–Ω–Ω—ã–π —Ö—ç–Ω–¥–ª–µ—Ä¬†**–Ω–µ**¬†–¥–æ–ª–∂–µ–Ω —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å¬†**–≤ –ª—é–±—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö**, –∫—Ä–æ–º–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ, –ø–æ—ç—Ç–æ–º—É –≤–µ—à–∞–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä¬†`StateFilter(default_state)`.

![](https://ucarecdn.com/43e8401b-71cd-4a2b-b000-b8b34a00317c/-/preview/-/enhance/80/)

–ù—É, –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π —Ö—ç–Ω–¥–ª–µ—Ä - —ç—Ç–æ —É–∂–µ –∑–Ω–∞–∫–æ–º–æ–µ –Ω–∞–º "—ç—Ö–æ".

    # –≠—Ç–æ—Ç —Ö—ç–Ω–¥–ª–µ—Ä –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –Ω–∞ –ª—é–±—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –∫—Ä–æ–º–µ —Ç–µ—Ö
    # –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ö—ç–Ω–¥–ª–µ—Ä—ã, –≤–Ω–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π
    @dp.message(StateFilter(default_state))
    async def send_echo(message: Message):
        await message.reply(text='–ò–∑–≤–∏–Ω–∏—Ç–µ, –º–æ—è —Ç–≤–æ—è –Ω–µ –ø–æ–Ω–∏–º–∞—Ç—å')

–ï–≥–æ –∑–∞–¥–∞—á–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–µ –∞–ø–¥–µ–π—Ç—ã, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ –Ω–∞—à–ª–æ—Å—å –¥—Ä—É–≥–∏—Ö —Ö—ç–Ω–¥–ª–µ—Ä–æ–≤ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ "–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é". –≠—Ç–æ –ø—Ä–æ—Å—Ç–æ "–∑–∞–≥–ª—É—à–∫–∞", —á—Ç–æ–±—ã –±–æ—Ç –Ω–µ –∑–∞–≤–∏—Å–∞–ª, –∫–æ–≥–¥–∞ –≤ —á–∞—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç —á—Ç–æ-—Ç–æ, —á—Ç–æ –æ–Ω –Ω–µ –∑–Ω–∞–µ—Ç –∫–∞–∫ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å.

–í–æ—Ç –∏ –≤—Å–µ –ø–æ –∫–æ–¥—É. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –µ–≥–æ –∏ –ø–æ–∏–≥—Ä–∞–π—Ç–µ—Å—å —Å –Ω–∏–º. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –∫–∞–∫ –≤–µ–¥–µ—Ç —Å–µ–±—è –±–æ—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö, –∫–æ–≥–¥–∞ –≤—ã –ø—ã—Ç–∞–µ—Ç–µ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–µ —Ç–æ, —á—Ç–æ –æ–Ω –æ–∂–∏–¥–∞–µ—Ç.

–í–æ—Ç —Ç–∞–∫ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç FSM. –í —Ü–µ–ª–æ–º, –Ω–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —É –±–æ—Ç–∞ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è —Ñ–æ—Ç–æ). –û–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã –∫–∞–∫–∏–º–∏-—Ç–æ —Å–æ–±—ã—Ç–∏—è–º–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—Å–ª–∞–ª —Ñ–æ—Ç–æ –∏ –º—ã –ø–µ—Ä–µ–≤–æ–¥–∏–º –µ–≥–æ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø–æ–ª—É—á–∞—Ç—å –∏–ª–∏ –Ω–µ—Ç –Ω–æ–≤–æ—Å—Ç–∏). –í –∫–∞–∂–¥—ã–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –±–æ—Ç–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ (—Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è —Ñ–æ—Ç–æ), –Ω–æ –≤—Å–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç–æ–ª—å–∫–æ, —Å–∫–æ–ª—å–∫–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è (–æ–∂–∏–¥–∞–Ω–∏–µ —Ñ–æ—Ç–æ, –æ–∂–∏–¥–∞–Ω–∏–µ –≤–æ–∑—Ä–∞—Å—Ç–∞, –æ–∂–∏–¥–∞–Ω–∏–µ –≤—ã–±–æ—Ä–∞ –ø–æ–ª–∞ –∏ —Ç.–ø.). –ù–∞–¥–µ—é—Å—å, —Ç–µ–ø–µ—Ä—å —Å–º—ã—Å–ª —ç—Ç–æ–π —Ñ—Ä–∞–∑—ã —Å—Ç–∞–ª –ø–æ–Ω—è—Ç–Ω–µ–µ :)