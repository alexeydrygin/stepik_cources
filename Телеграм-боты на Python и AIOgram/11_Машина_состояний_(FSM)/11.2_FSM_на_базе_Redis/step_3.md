## Установка Redis
---------------

Для Linux и MacOS никаких проблем с установкой Redis быть не должно. Все ставится предельно просто. А для Windows, как всегда, придется доставать с полки бубен :) Ну, ничего, мы уже привыкли :)

### Установка Redis на MacOS

У нас же остался "отсутствующий менеджер пакетов" Homebrew еще с установки интерпретатора, не правда ли? На всякий случай давайте это проверим командой в терминале:

    brew --version

Если ответ что-то типа такого:

    Homebrew 3.6.16

продолжаем, все в порядке. А если какой-то другой - вернитесь в [модуль](https://stepik.org/lesson/759384/step/3?unit=761400), посвященный подготовке инструментов, и установите Homebrew.

Будем считать, что он у вас установлен. Тогда в командной строке запускаем:

    brew install redis

и ожидаем завершения установки. После установки попробуйте запустить Redis командой:

    redis-server

Пойдут разные сообщения, и, в том числе, у меня появилась картинка:

                    _._                                                  
               _.-``__ ''-._                                             
          _.-``    `.  `_.  ''-._           Redis 7.0.7 (00000000/0) 64 bit
      .-`` .-```.  ```\/    _.,_ ''-._                                  
     (    '      ,       .-`  | `,    )     Running in standalone mode
     |`-._`-...-` __...-.``-._|'` _.-'|     Port: 6379
     |    `-._   `._    /     _.-'    |     PID: 17540
      `-._    `-._  `-./  _.-'    _.-'                                   
     |`-._`-._    `-.__.-'    _.-'_.-'|                                  
     |    `-._`-._        _.-'_.-'    |           https://redis.io       
      `-._    `-._`-.__.-'_.-'    _.-'                                   
     |`-._`-._    `-.__.-'    _.-'_.-'|                                  
     |    `-._`-._        _.-'_.-'    |                                  
      `-._    `-._`-.__.-'_.-'    _.-'                                   
          `-._    `-.__.-'    _.-'                                       
              `-._        _.-'                                           
                  `-.__.-'                                               
    

И еще в конце что-то типа:

    17540:M 12 Jan 2023 13:22:07.657 # Server initialized
    17540:M 12 Jan 2023 13:22:07.657 * Ready to accept connections

Теперь нужно подключиться к Redis и проверить, что он сохраняет и отдает данные. Для этого запускаем **еще один** терминал и выполняем команду:

    redis-cli

Должна появиться строка приглашения к взаимодействию (cli - это от Command Line Interface, то есть интерфейс командной строки):

    127.0.0.1:6379> 

Через нее можно отправлять команды в Redis. Например, можно добавить пару "ключ-значение" с помощью команды:

    SET my_key my_value

А затем получить значение по ключу

    GET my_key

Работает! Чтобы завершить работу Redis - можно в первом терминале, в котором у нас запущен Redis, нажать **Ctrl+С** также, как мы это делаем, когда хотим прервать выполнение программы на Python. Или можно не останавливать Redis, а просто выйти из режима командной строки - тогда нужно в терминале, где мы выполняли команду `redis-cli` выполнить команду `quit`.

Не смотря на то, что Редису все равно на какой машине он запущен, подразумевается, что он крутится где-то на сервере, а доступ к нему мы имеем через командную строку где-то в другом месте. Да и вообще, в эпоху повсеместной контейнеризации и редис, и бот, и другие микросервисы все живут по контейнерам и общаются по сети.

### Установка Redis на Linux

Вообще проще некуда:

    sudo apt install redis

Устанавливаем. А затем перезапускаем сервер:

    sudo service redis-server restart

Проверяем, что сервер запущен:

    sudo service redis-server status

Если все ок - среди прочей информации видим строчку:

    Status: "Ready to accept connections"

Пробуем запустить командную строку:

    redis-cli

Ну, и можно попробовать позаписывать и почитать пары "ключ-значение", как это описано выше, через команды SET и GET, чтобы совсем-совсем убедиться, что все работает.

### Установка Redis на Windows

А, вот, здесь начинается самое интересное :) Официальной поддержки для Windows у Redis нет. Есть, вроде, какие-то старые сборки, которые, вроде, как-то работают, но мы пойдем иным путем. Накатим Linux поверх Windows. Согласен, извращение. Как говорит один хороший программист Андрей Столяров - Windows - это неделя радости и годы мучений, а Linux - это неделя мучений и годы радости :) Но, что делать, пользователей Windows, даже среди программистов, большинство. И мы будем их постепенно приучать к Linux :)

Заходим в PowerShell от имени администратора и выполняем команду:

допишу несколько позже, как дистрибутив убунты скачаю. Полдня бьюсь :) Очень люблю Винду :)