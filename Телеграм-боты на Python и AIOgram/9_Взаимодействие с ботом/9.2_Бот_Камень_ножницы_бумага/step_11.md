## –§–∞–π–ª services.py
----------------

–í –º–æ–¥—É–ª–µ **services.py** —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –±–æ—Ç–∞, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É.

    import random
    
    from lexicon.lexicon_ru import LEXICON_RU
    
    
    # –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Å–ª—É—á–∞–π–Ω—ã–π –≤—ã–±–æ—Ä –±–æ—Ç–∞ –≤ –∏–≥—Ä–µ
    def get_bot_choice() -> str:
        return random.choice(['rock', 'paper', 'scissors'])
    
    
    # –§—É–Ω–∫—Ü–∏—è, –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è –∫–ª—é—á –∏–∑ —Å–ª–æ–≤–∞—Ä—è, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É
    # —Ö—Ä–∞–Ω–∏—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–µ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç - –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 
    def _normalize_user_answer(user_answer: str) -> str:
        for key in LEXICON_RU:
            if LEXICON_RU[key] == user_answer:
                return key
        raise Exception
    
    
    # –§—É–Ω–∫—Ü–∏—è, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∞—è –ø–æ–±–µ–¥–∏—Ç–µ–ª—è
    def get_winner(user_choice: str, bot_choice: str) -> str:
        user_choice = _normalize_user_answer(user_choice)
        rules: dict[str, str] = {'rock': 'scissors',
                                 'scissors': 'paper',
                                 'paper': 'rock'}
        if user_choice == bot_choice:
            return 'nobody_won'
        elif rules[user_choice] == bot_choice:
            return 'user_won'
        else:
            return 'bot_won'

–° —Ñ—É–Ω–∫—Ü–∏–µ–π `get_bot_choice` –≤—Å–µ –ø—Ä–µ–¥–µ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ. –û–Ω–∞ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥, –∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ª—É—á–∞–π–Ω—É—é —Å—Ç—Ä–æ–∫—É –∏–∑ —Å–ø–∏—Å–∫–∞. –õ–∏–±–æ `'rock'`, –ª–∏–±–æ `'paper'`, –ª–∏–±–æ `'scissors'`. –≠—Ç–æ –≤—ã–±–æ—Ä –±–æ—Ç–∞ - —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∫–Ω–æ–ø–∫–∏ —Å–æ —Å–≤–æ–∏–º –≤—ã–±–æ—Ä–æ–º –≤ –∏–≥—Ä–µ.

–§—É–Ω–∫—Ü–∏—è `_normalize_user_answer` - —ç—Ç–æ –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–∏ `get_winner`. –ù–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ–Ω–∞ —Å –Ω–∏–∂–Ω–µ–≥–æ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è, —á—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–Ω–∞ —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è –∏ –Ω–µ –¥–æ–ª–∂–Ω–∞ "—Å–º–æ—Ç—Ä–µ—Ç—å" –Ω–∞—Ä—É–∂—É. –ï–µ –∑–∞–¥–∞—á–∞ –ø—Ä–∏–Ω—è—Ç—å –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ —á–∞—Ç –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É –∏–≥—Ä–æ–≤–æ–≥–æ –≤—ã–±–æ—Ä–∞, –∏ –≤–µ—Ä–Ω—É—Ç—å –∫–ª—é—á –∏–∑ —Å–ª–æ–≤–∞—Ä—è `LEXICON_RU`, –ø–æ –∫–æ—Ç–æ—Ä–æ–º—É —Ö—Ä–∞–Ω–∏—Ç—Å—è —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç. –û–±—ã—á–Ω–æ –º—ã –æ–±—Ä–∞—â–∞–µ–º—Å—è –≤ —Å–ª–æ–≤–∞—Ä—å –ø–æ –∫–ª—é—á—É –∏ –ø–æ–ª—É—á–∞–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ –∑–¥–µ—Å—å –∑–∞–¥–∞—á–∞ –Ω–∞–æ–±–æ—Ä–æ—Ç - –ø–æ–ª—É—á–∏—Ç—å –∫–ª—é—á –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é, —á—Ç–æ–±—ã –≤—ã–±–æ—Ä –±–æ—Ç–∞ –∏ –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±—ã–ª –≤ –æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –∏ —Å –Ω–∏–º–∏ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —É–¥–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å.

–§—É–Ω–∫—Ü–∏—è `get_winner`, –∫–∞–∫ –±—ã–ª–æ —Å–∫–∞–∑–∞–Ω–æ —Ä–∞–Ω–µ–µ, –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –¥–≤–∞ —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–∞ - –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–±–æ—Ä –±–æ—Ç–∞. –í—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —ç—Ç–æ —Ç–µ–∫—Å—Ç —Å –∫–Ω–æ–ø–∫–∏, –∫–æ—Ç–æ—Ä—É—é –æ–Ω –Ω–∞–∂–∏–º–∞–µ—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–≥—Ä—ã, –∞ –≤—ã–±–æ—Ä –±–æ—Ç–∞ - —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–∏ `get_bot_choice`. –í —Ñ—É–Ω–∫—Ü–∏—é –æ–Ω–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö, –Ω–µ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ç–∏–ø–æ–≤ Python, —Ç–∞–∫-—Ç–æ —ç—Ç–æ —Å—Ç—Ä–æ–∫–æ–≤—ã–π —Ç–∏–ø, –∞ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ç–æ–≥–æ, —á—Ç–æ —É –±–æ—Ç–∞ - —ç—Ç–æ –∫–ª—é—á–∏ –≤ —Å–ª–æ–≤–∞—Ä–µ `LEXICON_RU` (`'rock'`, `'paper'` –∏ `'scissors'`), –∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —ç—Ç–∏–º –∫–ª—é—á–∞–º, —Ç–æ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç—ã —Å –∏–≥—Ä–æ–≤—ã—Ö –∫–Ω–æ–ø–æ–∫. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ -¬†'–ö–∞–º–µ–Ω—å üóø',¬†'–ë—É–º–∞–≥–∞ üìú' –∏¬†'–ù–æ–∂–Ω–∏—Ü—ã ‚úÇ'.

–ß—Ç–æ–±—ã –±—ã–ª–æ —É–¥–æ–±–Ω–æ –≤—ã—á–∏—Å–ª—è—Ç—å –∫—Ç–æ –ø–æ–±–µ–¥–∏–ª - –Ω—É–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –±–æ—Ç–∞ –∫ –æ–¥–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É, –¥–ª—è —ç—Ç–æ–≥–æ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é `_normalize_user_answer`, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∫–æ—Ç–æ—Ä–æ–π —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `user_choice`. –ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ, —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `user_—Åhoice`, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ `'rock'`¬†(–∫–∞–º–µ–Ω—å), –∞ —É –±–æ—Ç–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `bot_choice`, —Ç–æ–∂–µ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å—Ç—Ä–æ–∫–∞ `'scissors'` (–Ω–æ–∂–Ω–∏—Ü—ã). –î–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±–æ—Ç –ø–æ–±–µ–¥–∏–ª, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–ª–∏ –º–µ–∂–¥—É –Ω–∏–º–∏ –Ω–∏—á—å—è, –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å —Å–ª–æ–≤–∞—Ä—å `rules`, –≥–¥–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–µ–π —Ñ–∏–≥—É—Ä—ã, –ø–æ–±–µ–∂–¥–∞—é—â–∏–µ —Ñ–∏–≥—É—Ä—ã - –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —ç—Ç–æ–º—É –∫–ª—é—á—É. –ö–∞–º–µ–Ω—å –ø–æ–±–µ–∂–¥–∞–µ—Ç –Ω–æ–∂–Ω–∏—Ü—ã, –Ω–æ–∂–Ω–∏—Ü—ã –ø–æ–±–µ–∂–¥–∞—é—Ç –±—É–º–∞–≥—É, –±—É–º–∞–≥–∞ –ø–æ–±–µ–∂–¥–∞–µ—Ç –∫–∞–º–µ–Ω—å.

    rules: dict[str, str] = {'rock': 'scissors',
                             'scissors': 'paper',
                             'paper': 'rock'}

–ö–∞–º–µ–Ω—å (–∫–ª—é—á): –Ω–æ–∂–Ω–∏—Ü—ã (–∑–Ω–∞—á–µ–Ω–∏–µ), –Ω–æ–∂–Ω–∏—Ü—ã (–∫–ª—é—á): –±—É–º–∞–≥–∞ (–∑–Ω–∞—á–µ–Ω–∏–µ), –±—É–º–∞–≥–∞ (–∫–ª—é—á): –∫–∞–º–µ–Ω—å (–∑–Ω–∞—á–µ–Ω–∏–µ). –ü–æ –∫–ª—é—á—É –ø–æ–±–µ–¥–∏—Ç–µ–ª—å, –∞ –ø–æ –∑–Ω–∞—á–µ–Ω–∏—é —ç—Ç–æ–≥–æ –∫–ª—é—á–∞, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –ø—Ä–æ–∏–≥—Ä–∞–≤—à–∏–π.

–î–∞–ª–µ–µ –≤–æ–∑–º–æ–∂–Ω—ã 3 –∏—Å—Ö–æ–¥–∞:

*   `user_choice` –∏ `bot_choice` —Å–æ–≤–ø–∞–¥–∞—é—Ç - —Ç–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É `'nobody_won'`
*   –ü—Ä–∏ –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–µ `user_choice` –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∫–ª—é—á–∞ –≤ —Å–ª–æ–≤–∞—Ä—å `rules` –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ–º —è–≤–ª—è–µ—Ç—Å—è `bot_choice`, —Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É `'user_won'`.
*   –í –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö —Ñ—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä–æ–∫—É `'bot_won'`, –Ω–∞–¥–µ—é—Å—å, –ø–æ–Ω—è—Ç–Ω–æ –ø–æ—á–µ–º—É.

–ü–æ –∫–ª—é—á–∞–º `'nobody_won'`, `'user_won'` –∏ `'bot_won'` –≤ —Å–ª–æ–≤–∞—Ä–µ `LEXICON_RU` —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–µ–∫—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –±–æ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ —á–∞—Ç, —Å–æ–æ–±—â–∞—è –∫—Ç–æ –ø–æ–±–µ–¥–∏–ª.