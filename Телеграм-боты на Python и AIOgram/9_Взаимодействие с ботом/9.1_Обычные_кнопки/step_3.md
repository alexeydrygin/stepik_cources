## Расположение кнопок
-------------------

А сколько вообще можно добавить кнопок в клавиатуру с обычными кнопками? А сколько рядов с кнопками? А можно, например, чтобы в первом ряду было три кнопки, во втором пять, а в третьем одна? Давайте экспериментировать!

Мы уже обращались к документации Telegram Bot API и знаем, что кнопки - это массив массивов. Соответственно, чтобы получить, например, клавиатуру 3х3, основной массив (или список, т.к. мы пишем ботов на Python) должен содержать в себе три списка, в каждом из которых по 3 кнопки. Проверим!

**Пример 1.** Создаем клавиатуру из 3-х рядов кнопок по 3 кнопки в каждом ряду.

    # Создаем объекты кнопок
    button_1: KeyboardButton = KeyboardButton(text='Кнопка 1')
    button_2: KeyboardButton = KeyboardButton(text='Кнопка 2')
    button_3: KeyboardButton = KeyboardButton(text='Кнопка 3')
    button_4: KeyboardButton = KeyboardButton(text='Кнопка 4')
    button_5: KeyboardButton = KeyboardButton(text='Кнопка 5')
    button_6: KeyboardButton = KeyboardButton(text='Кнопка 6')
    button_7: KeyboardButton = KeyboardButton(text='Кнопка 7')
    button_8: KeyboardButton = KeyboardButton(text='Кнопка 8')
    button_9: KeyboardButton = KeyboardButton(text='Кнопка 9')
    
    # Создаем объект клавиатуры, добавляя в него кнопки
    my_keyboard: ReplyKeyboardMarkup = ReplyKeyboardMarkup(
                            keyboard=[[button_1, button_2, button_3],
                                      [button_4, button_5, button_6],
                                      [button_7, button_8, button_9]],
                            resize_keyboard=True)

Если теперь добавить такую клавиатуру в бота, чтобы он, например, присылал ее на команду /start, получим результат:

![](https://ucarecdn.com/aa4bd52f-4eea-4aed-b6a0-3e6ba384f0e3/-/preview/-/enhance/81/)

Кажется, именно этого мы и хотели добиться! Правда, получилась куча однотипного кода. На наше счастье в Python есть генераторы коллекций и можем получить такой же результат, сильно сократив количество строк кода:

    keyboard: list[list[KeyboardButton]] = [[KeyboardButton(
        text=f'Кнопка {j * 3 + i}') for i in range(1, 4)] for j in range(3)]
    
    # Создаем объект клавиатуры, добавляя в него кнопки
    my_keyboard: ReplyKeyboardMarkup = ReplyKeyboardMarkup(
        keyboard=keyboard,
        resize_keyboard=True)

Но, честно говоря, тоже такое себе, да? :) Как-то математики добавилось, вычислять номера кнопок надо... А можно просто нагенирировать кнопок сколько требуется, а потом красиво их расставить? Можно. На следующем шаге я покажу как удобно создавать клавиатуры штатными средствами `aiogram`. А пока давайте я приведу еще несколько примеров для наглядности.

**Пример 2.** Клавиатура из 9 кнопок в 5 рядах:

    # Генерируем список с кнопками
    buttons: list[KeyboardButton] = [
        KeyboardButton(text=f'Кнопка {i}') for i in range(1, 10)]
    
    # Составляем список списков для будущей клавиатуры
    keyboard: list[list[KeyboardButton]] = [[buttons[0]],
                                            buttons[1:3],
                                            buttons[3:6],
                                            buttons[6:8],
                                            [buttons[8]]]
    
    # Создаем объект клавиатуры, добавляя в него список списков с кнопками
    my_keyboard: ReplyKeyboardMarkup = ReplyKeyboardMarkup(
                                            keyboard=keyboard,
                                            resize_keyboard=True)

В результате получаем вот такую клавиатуру:

![](https://ucarecdn.com/543da539-6845-4f90-8a06-107af8fedefa/)

И, вроде, так и задумано, но появилась полоса вертикальной прокрутки. Будем, в дальнейшем, иметь в виду, что если рядов обычных кнопок больше 4-х - пользователям придется скроллить.

А что на счет горизонтальной прокрутки? Давайте попробуем добавить в клавиатуру два ряда, например, по... не будем мелочиться, по 30 кнопок.

**Пример 3.** 2 ряда кнопок по 30 кнопок в каждом ряду.

    # Генерируем список с кнопками
    buttons_1: list[KeyboardButton] = [
        KeyboardButton(text=f'Кнопка {i}') for i in range(1, 31)]
    
    # Генерируем список с кнопками
    buttons_2: list[KeyboardButton] = [
        KeyboardButton(text=f'Кнопка {i}') for i in range(31, 61)]
    
    # Составляем список списков для будущей клавиатуры
    keyboard: list[list[KeyboardButton]] = [buttons_1,
                                            buttons_2]

И результат:

![](https://ucarecdn.com/f736e9b2-42cd-4e53-8bdd-e2df1e6ad90c/-/preview/-/enhance/79/)

Во-первых, не видно номеров кнопок. Это мы сейчас быстро поправим. Во-вторых, кнопок 2 ряда, но явно не по 30 в ряду. В-третьих, горизонтальной полосы прокрутки не появилось. А вертикальная была в предыдущем примере. И в-четвертых, текст на кнопках подрезается автоматически, подстраиваясь под размер кнопок.

Уберем слово "Кнопка" и посмотрим на получившуюся нумерацию кнопок.

    # Генерируем список с кнопками
    buttons_1: list[KeyboardButton] = [
        KeyboardButton(text=f'{i}') for i in range(1, 31)]
    
    # Генерируем список с кнопками
    buttons_2: list[KeyboardButton] = [
        KeyboardButton(text=f'{i}') for i in range(31, 61)]
    
    # Составляем список списков для будущей клавиатуры
    keyboard: list[list[KeyboardButton]] = [buttons_1,
                                            buttons_2]

И вот так теперь это выглядит:

![](https://ucarecdn.com/df83a77e-c1f2-40df-9e74-0dbcc69ebd3a/-/preview/-/enhance/84/)

Откуда можно сделать вывод, что больше 12 кнопок в одном ряду размещать не имеет смысла. Телеграм не ругается на то, что их больше, но и доступа к лишним кнопкам в интерфейсе пользователя не дает.

А сколько всего таких рядов по 12 кнопок можно разместить? Не знаю, конечно, зачем может понадобиться большое количество рядов, но интересно же! Как на счет 100 рядов? То есть это, получается 100 \* 12 = 1200 кнопок. Получится?

**Пример 4.** Пытаемся сделать 100 рядов по 12 кнопок в каждом.

    buttons: list[KeyboardButton] = []
    keyboard: list[list[KeyboardButton]] = []
    
    # Заполняем список списками с кнопками
    for i in range(1, 1201):
        buttons.append(KeyboardButton(text=str(i)))
        if not i % 12:
            keyboard.append(buttons)
            buttons = []
    
    # Создаем объект клавиатуры, добавляя в него список списков с кнопками
    my_keyboard: ReplyKeyboardMarkup = ReplyKeyboardMarkup(
                                            keyboard=keyboard,
                                            resize_keyboard=True)

Получаем результат:

![](https://ucarecdn.com/f17df81e-3155-4b39-a283-5afa03c27c5a/-/preview/-/enhance/81/)

Выходит кнопок может быть максимум 300. Это получается 300 / 12 = 25 рядов. То есть максимальное количество рядов 25? Или нам просто ограничение по кнопкам позволило лишь 25 рядов создать? Давайте сделаем в каждом ряду по одной кнопке и посмотрим сколько рядов получится. Причем, кнопок возьмем, например, 350. Вдруг при такой конфигурации и кнопок можно будет больше. Мы же экспериментируем!

**Пример 5.** Пытаемся сделать 350 рядов кнопок по одной кнопке в каждом ряду.

    # Заполняем список списками с кнопками
    keyboard: list[list[KeyboardButton]] = [
        [KeyboardButton(text=f'Кнопка {i}')] for i in range(1, 351)]
    
    # Создаем объект клавиатуры, добавляя в него список списков с кнопками
    my_keyboard: ReplyKeyboardMarkup = ReplyKeyboardMarkup(
                                            keyboard=keyboard,
                                            resize_keyboard=True)

И посмотрим, что получилось:

![](https://ucarecdn.com/b7d69d31-0f79-4f0c-ad6e-0a743e30a0c8/-/preview/-/enhance/89/)

Ограничение на 300 кнопок сохранилось. Получается и рядов максимум тоже может быть 300. Опять же, мне сложно представить ситуации, в которых может понадобиться столько рядов и кнопок, но зато мы на практике увидели ограничения на их количество.

А теперь давайте учиться создавать клавиатуры "взрослым" способом, который предоставляет фреймворк `aiogram`.